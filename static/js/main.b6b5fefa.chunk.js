(this["webpackJsonppost-my-thoughts"]=this["webpackJsonppost-my-thoughts"]||[]).push([[0],{221:function(t,e,n){},222:function(t,e,n){},410:function(t,e,n){"use strict";n.r(e);var a=n(12),s=n(1),i=n(2),c=n.n(i),r=n(93),o=n.n(r),h=(n(221),n(29)),l=n(30),u=n(32),d=n(31),j=n(10),b=n(7),m=(n(222),n(9)),g=Object(m.b)(null,(function(t){return{logout:function(){return t((function(t,e,n){(0,n.getFirebase)().auth().signOut().then((function(){t({type:"LOGOUT_SUCCESS"})}))}))}}}))((function(t){return Object(s.jsxs)("ul",{className:"nav-items-container",children:[Object(s.jsx)(j.c,{to:"/post-my-thoughts/create-thought",children:Object(s.jsx)("li",{className:"nav-item",children:"New Thought"})}),Object(s.jsx)("a",{onClick:t.logout,children:Object(s.jsx)("li",{className:"nav-item",children:"Logout"})}),Object(s.jsx)(j.c,{to:"/post-my-thoughts/",children:Object(s.jsx)("li",{className:"nav-item",children:t.profile.initials})})]})})),O=function(t){return Object(s.jsxs)("ul",{className:"nav-items-container",children:[Object(s.jsx)(j.c,{to:"/post-my-thoughts/login",children:Object(s.jsx)("li",{className:"nav-item",children:"Login"})}),Object(s.jsx)(j.c,{to:"/post-my-thoughts/signup",children:Object(s.jsx)("li",{className:"nav-item",children:"Signup"})})]})},p=Object(m.b)((function(t){return console.log(t),{auth:t.firebase.auth,profile:t.firebase.profile}}))((function(t){var e=t.auth,n=t.profile,a=e.uid?Object(s.jsx)(g,{profile:n}):Object(s.jsx)(O,{});return Object(s.jsxs)("nav",{className:"main-nav",children:[Object(s.jsx)(j.b,{to:"/post-my-thoughts",children:Object(s.jsxs)("div",{className:"logo",children:["PostMy",Object(s.jsx)("strong",{children:"Thoughts"})]})}),Object(s.jsx)("ul",{className:"nav-items-container",children:a})]})})),f=n(55),x=n.n(f),v=function(t){var e=t.thought;return Object(s.jsxs)("div",{className:"thought-card",children:[Object(s.jsx)("div",{className:"card-title",children:e.title}),Object(s.jsxs)("div",{className:"card-author",children:["Posted by ",e.authorFirstName," ",e.authorLastName]}),Object(s.jsx)("div",{className:"card-date",children:x()(e.createdAt.toDate()).calendar()})]})},N=function(t){var e=t.thoughts;return Object(s.jsx)("div",{className:"thoughts-list",children:e&&e.map((function(t){return Object(s.jsx)(j.b,{to:"post-my-thoughts/thoughts/"+t.id,children:Object(s.jsx)(v,{thought:t})},t.id)}))})},y=function(t){var e=t.notifications;return Object(s.jsxs)("div",{className:"notifications",children:[Object(s.jsx)("div",{children:"Notifications"}),Object(s.jsx)("ul",{className:"notifications-container",children:e&&e.map((function(t){return Object(s.jsxs)("li",{className:"notification",children:[Object(s.jsx)("div",{className:"notification-user",children:t.user}),Object(s.jsx)("div",{className:"notification-content",children:t.content}),Object(s.jsx)("div",{className:"notification-date",children:x()(t.time.toDate()).fromNow()})]},t.id)}))})]})},C=n(23),S=n(20),E=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var t=this.props,e=t.thoughts,n=t.auth,a=t.notifications;return n.uid?Object(s.jsxs)("div",{className:"dashboard",children:[Object(s.jsx)(N,{thoughts:e}),Object(s.jsx)(y,{notifications:a})]}):Object(s.jsx)(b.a,{to:"/post-my-thoughts/login"})}}]),n}(i.Component),F=Object(S.d)(Object(m.b)((function(t){return{thoughts:t.firestore.ordered.thoughts,auth:t.firebase.auth,notifications:t.firestore.ordered.notifications}})),Object(C.firestoreConnect)([{collection:"thoughts",orderBy:["createdAt","desc"]},{collection:"notifications",limit:3,orderBy:["time","desc"]}]))(E),w=Object(S.d)(Object(m.b)((function(t,e){var n=e.match.params.id,a=t.firestore.data.thoughts;return{thought:a?a[n]:null,auth:t.firebase.auth}})),Object(C.firestoreConnect)([{collection:"thoughts"}]))((function(t){var e=t.thought;return t.auth.uid?e?Object(s.jsxs)("div",{className:"thought-details",children:[Object(s.jsx)("div",{className:"thought-title",children:e.title}),Object(s.jsx)("div",{className:"thought-desc",children:e.content}),Object(s.jsxs)("div",{className:"author-and-date-container",children:[Object(s.jsxs)("div",{className:"author",children:["Posted by ",e.authorFirstName," ",e.authorLastName]}),Object(s.jsx)("div",{className:"date",children:x()(e.createdAt.toDate()).calendar()})]})]}):Object(s.jsx)("div",{children:"Loading Thought..."}):Object(s.jsx)(b.a,{to:"/post-my-thoughts/login"})})),R=n(36),T=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={email:"",password:""},t}return Object(l.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(R.a)({},t.target.id,t.target.value)),console.log(t.target.id,t.target.value)}},{key:"handleSubmit",value:function(t){t.preventDefault(),this.props.login(this.state)}},{key:"render",value:function(){var t=this.props,e=t.authError;return t.auth.uid?Object(s.jsx)(b.a,{to:"/post-my-thoughts/"}):Object(s.jsx)("div",{className:"login",children:Object(s.jsxs)("form",{onSubmit:this.handleSubmit.bind(this),className:"login-form",children:[Object(s.jsxs)("div",{className:"login-username-container",children:[Object(s.jsx)("label",{htmlFor:"email",children:"Email"}),Object(s.jsx)("input",{type:"email",id:"email",placeholder:"email@test.ca",onChange:this.handleChange.bind(this)})]}),Object(s.jsxs)("div",{className:"login-password-container",children:[Object(s.jsx)("label",{htmlFor:"password",children:"Password"}),Object(s.jsx)("input",{type:"password",id:"password",onChange:this.handleChange.bind(this)})]}),Object(s.jsx)("button",{className:"login-btn",children:"Login"}),e?Object(s.jsx)("div",{children:e}):null]})})}}]),n}(i.Component),U=Object(m.b)((function(t){return{authError:t.auth.authError,auth:t.firebase.auth}}),(function(t){return{login:function(e){return t((n=e,function(t,e,a){(0,a.getFirebase)().auth().signInWithEmailAndPassword(n.email,n.password).then((function(){t({type:"LOGIN_SUCCESS"})})).catch((function(e){t({type:"LOGIN_ERROR",err:e})}))}));var n}}}))(T),k=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={email:"",password:"",firstName:"",lastName:""},t}return Object(l.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(R.a)({},t.target.id,t.target.value)),console.log(t.target.id,t.target.value)}},{key:"handleSubmit",value:function(t){t.preventDefault(),this.props.signUp(this.state)}},{key:"render",value:function(){var t=this.props,e=t.auth,n=t.authError;return e.uid?Object(s.jsx)(b.a,{to:"/post-my-thoughts/"}):Object(s.jsx)("div",{className:"login",children:Object(s.jsxs)("form",{onSubmit:this.handleSubmit.bind(this),className:"login-form",children:[Object(s.jsxs)("div",{className:"login-username-container",children:[Object(s.jsx)("label",{htmlFor:"email",children:"Email"}),Object(s.jsx)("input",{type:"email",id:"email",placeholder:"email@test.ca",onChange:this.handleChange.bind(this)})]}),Object(s.jsxs)("div",{className:"login-first-name-container",children:[Object(s.jsx)("label",{htmlFor:"firstName",children:"First Name"}),Object(s.jsx)("input",{type:"text",id:"firstName",placeholder:"Joe",onChange:this.handleChange.bind(this)})]}),Object(s.jsxs)("div",{className:"login-last-name-container",children:[Object(s.jsx)("label",{htmlFor:"lastName",children:"Last Name"}),Object(s.jsx)("input",{type:"text",id:"lastName",placeholder:"Smith",onChange:this.handleChange.bind(this)})]}),Object(s.jsxs)("div",{className:"login-password-container",children:[Object(s.jsx)("label",{htmlFor:"password",children:"Password"}),Object(s.jsx)("input",{type:"password",id:"password",onChange:this.handleChange.bind(this)})]}),Object(s.jsx)("button",{className:"login-btn",children:"Signup"}),n?Object(s.jsx)("div",{children:n}):null]})})}}]),n}(i.Component),L=Object(m.b)((function(t){return{auth:t.firebase.auth,authError:t.auth.authError}}),(function(t){return{signUp:function(e){return t(function(t){return function(e,n,a){var s=a.getFirebase,i=a.getFirestore,c=s(),r=i();c.auth().createUserWithEmailAndPassword(t.email,t.password).then((function(e){return r.collection("users").doc(e.user.uid).set({firstName:t.firstName,lastName:t.lastName,initials:t.firstName[0]+t.lastName[0]})})).then((function(){e({type:"SIGNUP_SUCCESS"})})).catch((function(t){e({type:"SIGNUP_ERROR",err:t})}))}}(e))}}}))(k),I=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(h.a)(this,n);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))).state={title:"",content:""},t}return Object(l.a)(n,[{key:"handleChange",value:function(t){this.setState(Object(R.a)({},t.target.id,t.target.value))}},{key:"handleSubmit",value:function(t){t.preventDefault(),this.props.createThought(this.state),this.props.history.push("/post-my-thoughts/")}},{key:"render",value:function(){return this.props.auth.uid?Object(s.jsx)("div",{className:"login",children:Object(s.jsxs)("form",{onSubmit:this.handleSubmit.bind(this),className:"login-form",children:[Object(s.jsxs)("div",{className:"thought-title-container",children:[Object(s.jsx)("label",{htmlFor:"title",children:"Title"}),Object(s.jsx)("input",{type:"text",id:"title",className:"thought-title-input",placeholder:"My New Thought",onChange:this.handleChange.bind(this)})]}),Object(s.jsxs)("div",{className:"thought-content-container",children:[Object(s.jsx)("label",{htmlFor:"content",children:"Content"}),Object(s.jsx)("textarea",{id:"content",className:"thought-content-input",onChange:this.handleChange.bind(this)})]}),Object(s.jsx)("button",{className:"login-btn",children:"Create"})]})}):Object(s.jsx)(b.a,{to:"/post-my-thoughts/login"})}}]),n}(i.Component),P=Object(m.b)((function(t){return{auth:t.firebase.auth}}),(function(t){return{createThought:function(e){return t(function(t){return function(e,n,s){s.getFirebase;var i=(0,s.getFirestore)(),c=n().firebase.profile,r=n().firebase.auth.uid;i.collection("thoughts").add(Object(a.a)(Object(a.a)({},t),{},{authorFirstName:c.firstName,authorLastName:c.lastName,authorID:r,createdAt:new Date})).then((function(){e({type:"CREATE_THOUGHT",thought:t})})).catch((function(t){e({type:"CREATE_THOUGHT_ERROR",err:t})}))}}(e))}}}))(I),A=function(t){Object(u.a)(n,t);var e=Object(d.a)(n);function n(){return Object(h.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(s.jsx)(j.a,{children:Object(s.jsxs)("div",{className:"app l-container-full-screen",children:[Object(s.jsx)(p,{}),Object(s.jsx)("div",{className:"l-container-1080 main-content",children:Object(s.jsxs)(b.d,{children:[Object(s.jsx)(b.b,{exact:!0,path:"/post-my-thoughts",component:F}),Object(s.jsx)(b.b,{path:"/post-my-thoughts/thoughts/:id",component:w}),Object(s.jsx)(b.b,{path:"/post-my-thoughts/login",component:U}),Object(s.jsx)(b.b,{path:"/post-my-thoughts/signup",component:L}),Object(s.jsx)(b.b,{path:"/post-my-thoughts/create-thought",component:P})]})})]})})}}]),n}(i.Component),G=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,412)).then((function(e){var n=e.getCLS,a=e.getFID,s=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),a(t),s(t),i(t),c(t)}))},_={authError:null},D=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"LOGIN_ERROR":return console.log("login error"),Object(a.a)(Object(a.a)({},t),{},{authError:"login failed"});case"LOGIN_SUCCESS":return console.log("login success"),Object(a.a)(Object(a.a)({},t),{},{authError:null});case"LOGOUT_SUCCESS":return console.log("logout success"),t;case"SIGNUP_SUCCESS":return console.log("signup success"),Object(a.a)(Object(a.a)({},t),{},{authError:null});case"SIGNUP_ERROR":return console.log("signup error"),Object(a.a)(Object(a.a)({},t),{},{authError:e.err.message});default:return t}},H=n(56),B={thoughts:[{id:"1",title:"a thought",content:"im thinking"},{id:"2",title:"two thought",content:"im thinking aboit"},{id:"3",title:"three thought",content:"im thinking aboit stuff"}]},M=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"CREATE_THOUGHT":return console.log("created thought",e.thought),t;case"CREATE_THOUGHT ERROR":return console.log("created thought error",e.err),t;default:return t}},J=Object(S.c)({auth:D,thought:M,firebase:C.firebaseReducer,firestore:H.firestoreReducer}),z=n(214),W=n(44);n(411),n(406),n(408);W.a.initializeApp({apiKey:"AIzaSyDYxqQK0qmJzamoY_e5OjkkG8UC9V4XRh4",authDomain:"post-my-thought.firebaseapp.com",databaseURL:"https://post-my-thought.firebaseio.com",projectId:"post-my-thought",storageBucket:"post-my-thought.appspot.com",messagingSenderId:"609553640298",appId:"1:609553640298:web:6f24e7450220cdedf6d313",measurementId:"G-PMWLYXHMED"}),W.a.analytics();var Y=W.a,q=Object(S.e)(J,Object(S.d)(Object(S.a)(z.a.withExtraArgument({getFirebase:C.getFirebase,getFirestore:H.getFirestore})),Object(H.reduxFirestore)(W.a,Y))),K={firebase:W.a,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:q.dispatch,createFirestoreInstance:H.createFirestoreInstance,presence:"presence",sessions:"sessions"};function X(t){var e=t.children,n=Object(m.c)((function(t){return t.firebase.auth}));return Object(C.isLoaded)(n)?e:Object(s.jsx)("div",{children:"Loading Screen..."})}o.a.render(Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(m.a,{store:q,children:Object(s.jsx)(C.ReactReduxFirebaseProvider,Object(a.a)(Object(a.a)({},K),{},{children:Object(s.jsx)(X,{children:Object(s.jsx)(A,{})})}))})}),document.getElementById("root")),G()}},[[410,1,2]]]);
//# sourceMappingURL=main.b6b5fefa.chunk.js.map